import{j as s,r as y,R as G,p as J}from"./index-ctt-mXTq.js";import{a as K}from"./dataUtils-t-YWtWD_.js";function P(t,l,a,i){const d=(i-90)*(Math.PI/180);return{x:t+a*Math.cos(d),y:l+a*Math.sin(d)}}function O(t,l,a,i){return{x:t+a*Math.cos(i),y:l+a*Math.sin(i)}}function D(t,l,a,i,d,x){const v=P(t,l,i,d),m=P(t,l,i,x),b=P(t,l,a,x),j=P(t,l,a,d),g=x-d>180?1:0;return["M",v.x,v.y,"A",i,i,0,g,1,m.x,m.y,"L",b.x,b.y,"A",a,a,0,g,0,j.x,j.y,"Z"].join(" ")}function Q(t){return t>=80?5:t>=60?4:t>=40?3:t>=20?2:1}function U(t){return 360/t}function V(t,l,a,i){const d=U(a),x=d*(t+.1),v=d/(i+1),m=x+v*l,b=m+v*.9;return[m,b]}const ee=({tooltip:t,domains:l,containerRef:a})=>{var C,w;const{x:i,y:d,score:x,level:v,domainId:m,skillId:b}=t,j=d-(((C=a.current)==null?void 0:C.getBoundingClientRect().top)||0)+10,g=i-(((w=a.current)==null?void 0:w.getBoundingClientRect().left)||0)+10,M=l[m||0],p=b!==void 0?M.skills[b]:null;return s.jsx("div",{className:"animate-in slide-in-from-bottom pointer-events-none absolute z-10 flex h-fit w-full max-w-[300px] rounded-xl border-2 bg-slate-900 p-4 text-sm shadow-lg backdrop-blur-sm md:max-w-sm",style:{top:j,left:g,borderColor:M.color},children:s.jsxs("div",{className:"flex flex-col items-start justify-between gap-2",children:[s.jsx("h3",{className:"mb-2 font-semibold",children:p?p.name:M.name}),s.jsx("div",{className:"text-slate-300",children:(p==null?void 0:p.description)||M.description}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"font-bold text-blue-400",children:[x,"%"]}),s.jsx("div",{className:"rounded-sm border bg-gray-800 px-2 py-1 text-xs font-semibold text-white",style:{borderColor:M.color},children:v})]}),p&&s.jsx("div",{className:"text-xs text-slate-300",children:p.levels[p.level]})," "]})})},te={1:"Foundational",2:"Intermediate",3:"Advanced",4:"Expert",5:"Master"},re=({domains:t,size:l=480})=>{const[a,i]=y.useState({width:l,height:l}),[d,x]=y.useState(null),[v,m]=y.useState(null),[b,j]=y.useState(null),[g,M]=y.useState(40),p=y.useRef(null),C=40,w=2;y.useEffect(()=>{if(!p.current)return;const e=new ResizeObserver(n=>{for(const r of n){const o=r.contentRect.width,u=o<=1024?40:240,h=Math.min(o-u,600);i({width:h,height:h});const f=Math.max(20,Math.min(40,h/8));M(f)}});return e.observe(p.current),()=>e.disconnect()},[]);const{ringStep:F,arcInnerRadius:B,arcOuterRadius:E,chartRadius:c}=y.useMemo(()=>{const e=a.width/2,n=Math.max(0,(e-g-C)/5),r=g+5*n+15,o=r+5;return{ringStep:n,arcInnerRadius:r,arcOuterRadius:o,chartRadius:e}},[a.width,g]),L=y.useCallback((e,n,r,o,u)=>{x({x:e.clientX,y:e.clientY,score:o,domainId:n,skillId:r,level:u})},[]),N=y.useCallback(()=>x(null),[]),W=()=>t.flatMap(e=>e.skills.map(n=>{const r=`gradient-${e.name}-${n.name}`.replace(/\s+/g,"-");return s.jsxs("radialGradient",{id:r,cx:"50%",cy:"50%",r:"80%",fx:"50%",fy:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:e.color}),s.jsx("stop",{offset:"100%",stopColor:J(e.color)})]},r)})),T=()=>t.map((e,n)=>{const r=t.length,o=2*Math.PI/r,u=w*Math.PI/180,h=E+10,f=n*o,$=f+o,A=f+u/2-Math.PI/2,S=$-u/2-Math.PI/2,I=O(c,c,h,A),R=O(c,c,h,S),k=S-A>180?1:0;return s.jsx("path",{id:`domain-label-path-${n}`,d:`M ${I.x} ${I.y} A ${h} ${h} 0 ${k} 1 ${R.x} ${R.y}`,fill:"none"},`domain-label-path-${n}`)}),z=()=>{const e=t.length===0||t===void 0||t===null;return[1,2,3,4,5].map(n=>s.jsxs(G.Fragment,{children:[s.jsx("circle",{cx:c,cy:c,r:g+n*F,fill:"#020618",stroke:"#f8fafc",strokeWidth:1,opacity:.25,style:{animation:e?"pulseRing 1.5s cubic-bezier(0.4,0,0.6,1) infinite":"none"}},n),s.jsx("style",{children:`
                        @keyframes pulseRing {
                            0%, 100% { opacity: 0.3; }
                            50% { opacity: 1; }
                        }
                    `})]},n))},_=()=>t.map((e,n)=>{const r=n*2*Math.PI/t.length-Math.PI/2,o=O(c,c,a.width/2,r);return s.jsx("line",{x1:c,y1:c,x2:o.x,y2:o.y,stroke:"#eeeeee",strokeWidth:1,opacity:.3},n)}),X=()=>t.map((e,n)=>{const o=360/t.length,u=n*o,h=u+e.score/100*o,f=u+w,$=h-w,A=D(c,c,B,E,f,u+o-w),S=D(c,c,B,E,f,$);return s.jsxs(G.Fragment,{children:[s.jsx("path",{d:A,fill:"#cccccc",opacity:.85},`domain-bg-${e.name}`),s.jsx("path",{d:S,fill:e.color,opacity:.85,style:{transition:"all 0.5s ease-in-out"}},`domain-arc-${e.name}`)]},e.name)}),Y=()=>t.map((e,n)=>s.jsx("text",{fill:"#ffffff",fontWeight:"bold",children:s.jsx("textPath",{className:"hidden cursor-default text-[0.5rem] md:block lg:text-xs",href:`#domain-label-path-${n}`,startOffset:"50%",textAnchor:"middle",alignmentBaseline:"middle",onMouseEnter:r=>{const o=K(e.score);j(e.name),L(r,n,void 0,e.score,o)},onMouseLeave:()=>{j(null),N()},children:e.name})},`label-${e.name}`)),Z=()=>t.map((e,n)=>{const r=b===e.name,o=360/t.length,u=o*n,h=u+o,f=D(c,c,0,g,u,h);return s.jsx("path",{d:f,fill:`${e.color}`,opacity:r?1:e.score/50,stroke:r?e.color:"#45556c",strokeWidth:r?2:1,className:"hover:opacity-80",style:{filter:r?"drop-shadow(0 0 4px rgba(0,0,0,0.5))":void 0,cursor:"pointer",transition:"all 0.5s ease-in-out"},onMouseEnter:$=>{const A=K(e.score);j(e.name),L($,n,void 0,e.score,A)},onMouseLeave:()=>{j(null),N()}},e.name)}),q=()=>t.map((e,n)=>s.jsx("g",{style:{transition:"all 0.5s ease-in-out"},children:e.skills.map((r,o)=>{const u=Q(r.score),h=g,f=g+r.score*F/20,[$,A]=V(n,o,t.length,e.skills.length),S=D(c,c,h,f,$,A),I=`gradient-${e.name}-${r.name}`.replace(/\s+/g,"-"),R=`${e.name}-${r.name}`,k=v===R;return s.jsx("path",{d:S,fill:`url(#${I})`,opacity:k?1:.8,stroke:k?e.color:"#45556c",strokeWidth:k?2:1,style:{filter:k?`drop-shadow(0 0 4px ${e.color})`:void 0,cursor:"pointer",transition:"all 0.5s ease-in-out"},onMouseEnter:H=>{m(R),L(H,n,o,r.score,te[u])},onMouseLeave:()=>{m(null),N()}},R)})},e.name));return s.jsxs("div",{ref:p,className:"relative col-span-2 flex w-full max-w-screen items-center justify-center",children:[s.jsxs("svg",{width:a.width,height:a.height,viewBox:`0 0 ${a.width} ${a.height}`,children:[s.jsx("defs",{children:W()}),s.jsx("defs",{children:T()}),z(),_(),X(),Y(),Z(),q()]}),d&&s.jsx(ee,{tooltip:d,domains:t,containerRef:p})]})};export{re as C};
